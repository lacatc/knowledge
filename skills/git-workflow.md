# Datartisan 实际工作 Git 工作流程说明

> 俗称：三库模型

## 基本概念明确

- **对于 git 的基本概念和使用要熟悉**

- 注意区分不同库与不同的分支，这里我们只谈库与库的关系

- 此协作模型需要依赖 git 库托管服务平台

- git 库在实现层面是对等的，但是在实际应用层面往往是不对等的
  - 往往需要有一个核心库（类似 master 的存在）
  - 对于核心库的维护与其他库的维护思路有差异
    - 比如：有的库落实实质性的进展
    - 比如：有的库用来做实践实验

- 有那三个库？
  - 核心库：
    - 取个名字：main
    - 我们叫主库
    - 隶属于团队，由专人维护
    - 在git托管服务的网站
  - 个人远端库：
    - 取个名字：origin
    - 我们叫自己的库
    - 隶属于个人，由自己维护
    - 在git托管服务的网站
  - 个人本地库：
    - 取个名字：local
    - 我们叫本地库
    - 隶属于个人，由自己维护
    - 在工作电脑中

- 团队维护工作内容：
  - 创建团队库
  - 删除团队库
  - 检查 review pull request 决定是否合并

画图：

@todo

Tips:
- main 与 origin 的操作在网页中进行（既提供托管服务的网站）

## 各种情况的操作步骤

### 情况一：新加入某个版本库的协作

1. fork 核心库到自己的账号下

2. clone 自己账号下的个人远端库到本地

> 如果要切换到已有的个人远端分支时，命令： git checkout -b {branch_name} origin/{branch_name}

3. 本地库就可以开始进行工作了


### 情况二：工作成果提交合并到核心库

1. 本地操作，提交

git add

git commit


2. 将本地库的成果推送到个人远端库

git push

> 注意：这个步骤是不会产生冲突的，因为个人远端库的进展肯定会落后于本地库的进展，且没有其他人进行操作

3. 在代码托管服务网页中，发起 pull request

*发起 pull request*

> 注意：这时会涉及分支的选择

### 情况三：核心库有其他人的进展，需要本地库更新

1. 将核心库加入到 remote 中

git add remote main {核心库地址}

2. 获取最新进展

git fetch main

3. 合并最新进展

git pull main {对应分支}

4. 处理可能有的冲突

处理思路：将当前存在冲突的状态，改为自己期望的状态 然后  git commit 即可

## 另外关于分支

对于一般的分析项目，只需要使用一个分支即可，既只使用 master 分支

